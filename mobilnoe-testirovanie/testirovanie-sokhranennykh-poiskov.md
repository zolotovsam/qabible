# Тестирование сохраненных поисков

Сохраненные поиски - удобный инструмент, с помощью которого можно сохранить необходимый запрос и быть в курсе о новых поступлениях. Это удобно так как:

* не нужно каждый раз выставлять параметры и фильтры поиска заново, вы сразу переходите к нужным результатам;
* вы получаете уведомления о новых объявлениях сразу после их публикации.

**Сохранение поискового запроса неавторизованным и авторизованным пользователями**

Разумеется есть два вида пользователей: авторизованный и неавторизованный. Если мы сохраняем поисковой запрос будучи неавторизованным пользователем, в таком случае проверяем, что выполняется переход на экран авторизации и после авторизации или регистрации пользователя, поисковой запрос добавляется в раздел "избранное". Кейсы, на которые стоит обратить внимание, если пользователь новый, то ему должны отобразиться все необходимые попапы, тултипы, онбординги. Есть большая вероятность, что про них могли забыть. При сохранении поискового запроса авторизованным пользователем, все гораздо проще - поиск сохраняется, а сохраненный поиск пользователь может обнаружить на экране с сохраненными поисками (о нем мы поговорим несколько позже).

**Текстовый поиск**

Не всегда пользователь хочет задавать фильтры для поискового запроса, а желает ограничиться например только одним текстовым поиском. При сохранении текстового поиска необходимо проверить, что на бэк с клиента уходит корректный запрос, в котором передается параметр с нашим поисковым запросом. Также стоит учесть кейсы, когда значение параметра, содержащего поисковой запрос, оказалось пустым, а также кейсы, когда в параметре содержится эмодзи.

**Поиск с выбранными фильтрами**

Наиболее распространенный кейс, когда пользователь задает специфичный поисковой запрос и хочет его сохранить. Например пользователь ищет автомобиль со множеством фильтров.

В данном кейсе необходимо проверить сохранение при различных комбинациях фильтров, а также что все фильтры корректно передаются с клиента на бэк. В дальнейшем, разумеется, при открытии сохраненного запроса со множеством комбинаций фильтров, стоит проверить, что все фильтры, пришедшие с бэка, корректно отображаются у пользователя и поисковая выдача соответствует запросу.

**Настройка частоты уведомлений при сохранении**

Пользователь может настроить частоту уведомлений о новых поступлениях. Мы выбираем определенный параметр, который в данном случае передается на бэк. А уже в дальнейшем, в соответствии с заданными параметрами, будет приходить push-уведомление клиенту. Как и в предыдущих кейсах, стоит проверить, что передается корректное значение параметра частоты уведомлений, а также это выбранное значение отображается на клиенте.

**Отображение сохраненного поискового запроса**

Пользователь сохранил поисковой запрос. А теперь рассмотрим кейсы, которые стоит учесть при тестировании экрана, где отображаются все сохраненные поисковые запросы.

**Текстовый поисковой запрос (длинный текст)**

Стоит учесть, что пользователь может сохранить поисковой запрос с абсолютном разным количеством символов, поэтому обращаем внимание на проверки, когда оставшиеся символы должны скрываться под многоточие.

**Сохраненный поиск с выбранными фильтрами**

Как мы уже говорили выше, когда мы ищем тот или иной товар, мы задаем определенные фильтры. Это может быть определенная стоимость, наличие доставки, удаленность от нас, наличие скидки и многое другое. Фильтров может быть много, поэтому не всегда они все могут поместиться в ячейке. В данном случае, фильтры, которые не поместились, должны скрываться также под многоточие.

**Поисковой запрос с emoji**

Пользователь может выразить свои эмоции и добавить в поисковой запрос, например эмодзи. Стоит проверить как корректное сохранение поискового запроса, так и отображение товаров по данному поиску.

**Карусель товаров в сохраненном поиске**

По определенному запросу может быть много товаров. Сгруппированные товары по категории располагаются в карусели. Естественно не все товары будут помещаться, поэтому пользователь должен иметь возможность просмотреть ленту со всеми товарами из карусели. Для начала, стоит проверить отображение разного количества товаров (минимальное и максимальное значение). Следом, стоит проверить скролл товаров в карусели. Также проверяем переходы из карусели на ленту с товарами. Для этого может быть реализована кнопка в конце карусели, например "Посмотреть все объявления", либо активное название карусели, например, при тапе на заголовок "телефоны", у нас откроется лента с товарами, выбранными в соответствии с заданными фильтрами.

**Сохраненный поиск без подходящих товаров**

Предположим, пользователь задал такой поисковой запрос, по которому в выдаче на данный момент нет подходящих товаров? В таком случае он может сохранить такой запрос, а на экране сохраненных поисков уже карусели с товарами не будет. Когда товары, соответствующие запросу появятся на сервисе, то они отобразятся пользователю в карусели товаров.

Необходимо учесть, что может быть как один товар, так и n-количество товаров, соответственно скролл товаров в карусели должен работать корректно, а также все атрибуты превью карточки товара (стоимость, название, "сердечко" избранного) отображаются на карточке.

**Настройка частоты уведомлений о новых поступлениях**

Поиск может быть нам интересен по-разному. Например, мы очень хотим не пропустить появление нового товара, в таком случае выберем "Уведомления сразу", либо не хотим получать уведомления часто и предпочтем "Уведомления раз в день". В любом выбранном нами случае, мы должны получать уведомления ровно столько раз, сколько мы выбрали в настройке.

**Настройка частоты уведомлений, если уведомления отключены**

А если пользователь отключит в настройках уведомления? В таком случае подписаться на поиск и настроить уведомления не получится. Однако можно перейти в настройки и включить уведомления. Тут важно проверить переход между приложением и экраном настроек уведомлений.

**Удаление поиска**

Пользователю может быть не интересен поисковой запрос и он захочет его удалить. В данном случае, удалить поиск возможно из боттомшита "Подписка на поиск". После удаления проверяем то, чтобы поиск исчезал с экрана "Поиски", а также верстку ленты с сохраненными поисками. Она не должна ломаться. Также стоит учесть кейсы с отключенным соединением с интернетом.

**Каунтеры поисков**

Каунтеры - счетчики, которые служат для интерактивного отображения какого-то количества: новые товары, сообщения, избранное и многое другое. Разумеется, при появлении нового товара в сохраненном поиске, информация об этом товаре придет к нам с бэка. Каунтеры приходят также с бэка. Основные кейсы при тестировании счетчиков будут связаны с удалением товаров и проверки, что значение каунтера изменилось в меньшую сторону, а также, что при поступлении нового товара каунтер изменяется в большую сторону. Но это не все. Стоит проверить максимальное отображаемое значение (в кружке) для каунтера, например, если товаров будет более 100. В таком случае реализация может быть разной, например отображаться значение 99+. Также может отображаться полностью значение счетчика, например 115, тогда следует исходить из логики работы приложения и проверить как будет отображаться максимально допустимое значение (например, вряд ли в приложении для заказа пиццы, пользователь добавит в заказ 124 455 пицц).

**Уведомления по новым товарам в сохраненном поиске**

При тестировании push-уведомлений по новым товарам стоит выполнять проверки, характерные для тестирования пушей. В данной статье не будем затрагивать все кейсы при тестировании push-уведомлений, так как они описаны в одной нашей статье.

**Дополнительные проверки**

В зависимости от реализации могут быть добавлены тултипы, попапы, тоасты - все это, разумеется, требует дополнительных проверок. Также не стоит забывать и про базовые кейсы при тестировании.

Источники:

* [Тестирование сохраненных поисков](https://telegra.ph/Testirovanie-sohranennyh-poiskov-05-20)
