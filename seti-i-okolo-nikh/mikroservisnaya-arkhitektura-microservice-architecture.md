# Микросервисная архитектура (Microservice Architecture)

Микросервисная архитектура или просто микросервисы - это особый метод разработки программных систем, который пытается сосредоточиться на создании однофункциональных модулей с четко определенными интерфейсами и операциями. Эта тенденция стала популярной в последние годы, поскольку предприятия стремятся стать более гибкими и перейти к DevOps и непрерывному тестированию.

![https://d2m6ke2px6quvq.cloudfront.net/uploads/2020/09/11/3f3de3fc-f3a8-4cd1-81cd-518496f59141.jpg](https://d2m6ke2px6quvq.cloudfront.net/uploads/2020/09/11/3f3de3fc-f3a8-4cd1-81cd-518496f59141.jpg)

![https://d2m6ke2px6quvq.cloudfront.net/uploads/2020/09/11/2381c271-4fde-4cc1-94d9-a2e2d72a81c0.jpg](https://d2m6ke2px6quvq.cloudfront.net/uploads/2020/09/11/2381c271-4fde-4cc1-94d9-a2e2d72a81c0.jpg)

Микросервисы имеют множество преимуществ для Agile- и DevOps-команд - как отмечает Мартин Фаулер, Netflix, eBay, Amazon, Twitter, PayPal и другие звезды технологий перешли от монолитной к микросервисной архитектуре. В отличие от микросервисов монолитное приложение строится как единая автономная единица. Это замедляет внесение изменений в приложение, поскольку влияет на всю систему. Модификация, внесенная в небольшой участок кода, может потребовать создания и развертывания совершенно новой версии программного обеспечения. Масштабирование определенных функций приложения также означает, что вам необходимо масштабировать все приложение. Микросервисы решают эти проблемы монолитных систем, будучи максимально модульными. В простейшей форме они помогают создать приложение в виде набора небольших служб, каждая из которых работает в своем собственном процессе и развертывается независимо. Эти сервисы могут быть написаны на разных языках программирования и могут использовать разные методы хранения данных. Хотя это приводит к разработке систем, которые являются масштабируемыми и гибкими, они нуждаются в динамическом преобразовании. Микросервисы часто подключаются через API и могут использовать многие из тех же инструментов и решений, которые выросли в экосистеме RESTful и веб-сервисов. Тестирование этих API может помочь проверить поток данных и информации во время развертывания микросервиса.

Точно так же, как не существует формального определения термина «микросервисы», нет и стандартной модели, которую вы увидите представленной в каждой системе, основанной на этом архитектурном стиле. Но вы можете ожидать, что большинство микросервисных систем будут иметь несколько примечательных характеристик:

1. **Мультикомпонентные**: Программное обеспечение, созданное как микрослужбы, по определению может быть разбито на несколько составных служб. Почему? Таким образом каждую из этих служб можно развертывать, настраивать, а затем повторно развертывать независимо друг от друга без ущерба для целостности приложения. В результате вам может потребоваться изменить только одну или несколько отдельных служб вместо повторного развертывания целых приложений. Но у этого подхода есть свои недостатки, в том числе дорогостоящие удаленные вызовы (вместо вызовов внутри процесса), более грубые удаленные API и повышенная сложность при перераспределении обязанностей между компонентами;
2. **Созданы для бизнеса**: Стиль микросервисов обычно организован вокруг бизнес-возможностей и приоритетов. В отличие от традиционного монолитного подхода к разработке, когда разные команды уделяют особое внимание, скажем, пользовательскому интерфейсу, базам данных, технологическим уровням или логике на стороне сервера, в микросервисной архитектуре используются кроссфункциональные команды. В обязанности каждой команды входит создание конкретных продуктов на основе одного или нескольких отдельных сервисов, взаимодействующих через шину сообщений. В микросервисах команда владеет продуктом всю жизнь, как в часто цитируемой максиме Amazon: “[Вы создаете это, вы это запускаете](https://www.strehle.de/tim/weblog/archives/2010/11/09/1320)”;
3. **Простая маршрутизация**: Микросервисы действуют примерно так же, как классическая система UNIX: они получают запросы, обрабатывают их и генерируют соответствующий ответ. Это противоположно тому, как работают многие другие продукты, такие как ESB (Enterprise Service Buses), где используются высокотехнологичные системы для маршрутизации сообщений, хореографии и применения бизнес-правил. Можно сказать, что у микросервисов есть интеллектуальные конечные точки (endpoints), которые обрабатывают информацию и применяют логику, и тупые каналы (?dumb pipes), по которым информация течет;
4. **Децентрализованные**: Поскольку микросервисы включают множество технологий и платформ, старые методы централизованного управления не являются оптимальными. Сообщество микросервисов предпочитает децентрализованное управление, потому что его разработчики стремятся создавать полезные инструменты, которые затем могут использоваться другими для решения тех же проблем. Как и децентрализованное управление, микросервисная архитектура также способствует децентрализованному управлению данными. Монолитные системы используют одну логическую базу данных для разных приложений. В микросервисном приложении каждая служба обычно управляет своей уникальной базой данных;
5. **Отказоустойчивые**: Как всесторонне развитый ребенок, микросервисы созданы, чтобы справляться с ошибками. Поскольку несколько уникальных и разнообразных сервисов взаимодействуют друг с другом, вполне возможно, что сервис может выйти из строя по той или иной причине (например, когда поставщик недоступен). В этих случаях клиент должен позволить своим соседним службам работать, пока он отключается. Однако мониторинг микросервисов может помочь предотвратить риск сбоя. По понятным причинам это требование делает микросервисы более сложными по сравнению с архитектурой монолитных систем;
6. **Эволюционные**: Архитектура микросервисов представляет собой эволюционный дизайн и, опять же, идеально подходит для эволюционирующих систем, в которых вы не можете полностью предвидеть типы устройств, которые однажды могут получить доступ к вашему приложению. , можно постепенно преобразовать в микросервисы, взаимодействующие с более старой монолитной архитектурой через API.

**Примеры**

Netflix имеет широко распространенную архитектуру, которая превратилась из монолитной в SOA. Каждый день он получает более одного миллиарда вызовов с более чем 800 различных типов устройств на свой API потокового видео. Затем каждый вызов API запрашивает около пяти дополнительных вызовов серверной службы. Amazon также перешел на микросервисы. Они получают бесчисленное количество вызовов из различных приложений, включая приложения, которые управляют API веб-службы, а также самим веб-сайтом, которые были бы просто невозможны для их старой двухуровневой архитектуры. Аукционный сайт eBay - еще один пример, прошедший тот же переход. Их основное приложение состоит из нескольких автономных приложений, каждое из которых выполняет бизнес-логику для различных функциональных областей.

**SOA vs. Microservices**

«Погодите-ка, - могут бормотать некоторые из вас за утренним кофе, - разве это не просто другое название SOA?» Сервис-ориентированная архитектура (SOA), возникшая в первые несколько лет этого века, и микросервисная архитектура (сокращенно MSA) имеют ряд общих черт. Однако традиционная SOA представляет собой более широкую структуру и может означать самые разные вещи. Некоторые сторонники микросервисов вообще отвергают тег SOA, в то время как другие считают микросервисы просто идеальной, усовершенствованной формой SOA. В любом случае, мы считаем, что существует достаточно четких различий, чтобы оправдать отдельную концепцию «микросервиса» (по крайней мере, как особую форму SOA, как мы проиллюстрируем позже). Типичная модель SOA, например, обычно имеет более зависимые ESB, а микросервисы используют более быстрые механизмы обмена сообщениями. SOA также ориентирована на императивное программирование, тогда как архитектура микросервисов ориентирована на стиль программирования с гибким субъектом. Кроме того, модели SOA, как правило, имеют реляционную базу данных слишком большого размера, в то время как микросервисы часто используют базы данных NoSQL или micro-SQL (которые могут быть подключены к обычным базам данных). Но реальная разница в первую очередь связана с методами архитектуры, используемыми для получения интегрированного набора сервисов. Поскольку в цифровом мире все меняется, гибкие методы разработки, которые могут идти в ногу с требованиями эволюции программного обеспечения, бесценны. Большинство методов, используемых в архитектуре микросервисов, исходят от разработчиков, которые создавали программные приложения для крупных корпоративных организаций и знают, что сегодняшние конечные пользователи ожидают динамичного, но согласованного взаимодействия на самых разных устройствах. Масштабируемые, адаптируемые, модульные и быстродоступные облачные приложения пользуются большим спросом. И это заставило многих разработчиков изменить свой подход.

Источники:

* [What is Microservices?](https://smartbear.com/solutions/microservices/)

Доп. материал:

* [Современная Микросервисная архитектура в банковской сфере](https://www.youtube.com/watch?v=xEsLHjAPtok)
* [Microservices](https://martinfowler.com/articles/microservices.html)
* [Pattern: Microservice Architecture](https://microservices.io/patterns/microservices.html)
* [Microservices vs Monolith](https://www.n-ix.com/microservices-vs-monolith-which-architecture-best-choice-your-business/)
